{"version":3,"sources":["utils/api.js","actions/cep.js","reducers/cep.js","reducers/index.js","middleware/logger.js","middleware/index.js","components/Search/index.js","components/Dialog/index.js","components/Address/index.js","components/Map/index.js","components/App.js","index.js","store.js"],"names":["CEP_URL","API_URL","API_KEY","getInfoCEP","cep","arguments","length","undefined","fetchJsonp","concat","then","res","json","logradouro","bairro","localidade","uf","catch","ex","Error","getGeoLocation","params","geoUrl","url","indexOf","Object","keys","map","k","encodeURIComponent","join","queryParams","buildUrl","objectSpread","key","fetch","status","results","geometry","location","lat","lng","getLocationInfo","_x","_getLocationInfo","apply","this","_callee","viaCep","geoLoc","data","regenerator_default","a","wrap","_context","prev","next","sent","address","abrupt","stop","REQUEST_CEP","RECEIVE_CEP","requestCEP","type","receiveCEP","info","payload","fetchCEP","_ref","asyncToGenerator","mark","dispatch","API","state","isFetching","action","combineReducers","logger","store","console","group","log","result","getState","groupEnd","composeWithDevTools","applyMiddleware","thunk","Search","handleChange","event","_event$target","target","name","numbers","value","replace","_this","setState","defineProperty","submitForm","e","preventDefault","props","onSearch","react_default","createElement","className","onSubmit","placeholder","aria-label","onChange","Component","Dialog","visible","onCloseClick","children","onClick","Address","_ref$logradouro","mapStyles","width","height","MapContainer","showingInfoWindow","activeMarker","selectedPlace","initialCenter","initialZoom","onMarkerClick","marker","onClose","_this$state","_this$props","showMarker","google","dist","zoom","style","GoogleApiWrapper","apiKey","App","showDialog","_this$props$info","components_Search","components_Dialog","components_Address","Map","assign","connect","ReactDOM","render","es","initialState","createStore","reducer","middleware","configureStore","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.0e1b99d4.chunk.js","sourcesContent":["import fetchJsonp from 'fetch-jsonp';\n\nconst CEP_URL = 'https://viacep.com.br/ws';\nconst API_URL = 'https://maps.googleapis.com/maps/api/geocode/json';\nexport const API_KEY = 'AIzaSyBcAqRGOwKrY4l-yrUi1CNu7k6F2fDF8U0';\n\nexport function getInfoCEP(cep = '') {\n  return fetchJsonp(`${CEP_URL}/${cep}/json/?callback=myfn`)\n    .then(res => res.json())\n    .then(json => {\n      const { cep, logradouro, bairro, localidade, uf } = json;\n      return { cep, logradouro, bairro, localidade, uf };\n    })\n    .catch(ex => {\n      throw new Error('Error getting ViaCEP data', ex);\n    });\n}\n\nexport function getGeoLocation(params) {\n  const geoUrl = buildUrl(API_URL, { ...params, key: API_KEY });\n  return fetch(geoUrl)\n    .then(res => res.json())\n    .then(json => {\n      const location =\n        json.status === 'OK'\n          ? json.results[0].geometry.location\n          : { lat: 0, lng: 0 };\n      return location;\n    })\n    .catch(ex => {\n      throw new Error('Error getting GoogleMaps API data', ex);\n    });\n}\n\nexport async function getLocationInfo(cep) {\n  const viaCep = await getInfoCEP(cep);\n  const geoLoc = await getGeoLocation({ address: cep });\n\n  const data = {\n    ...viaCep,\n    ...geoLoc\n  };\n\n  return data;\n}\n\nfunction queryParams(params) {\n  return Object.keys(params)\n    .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`)\n    .join('&');\n}\n\nfunction buildUrl(url, params) {\n  return (url += (url.indexOf('?') === -1 ? '?' : '&') + queryParams(params));\n}\n","import * as API from '../utils/api';\n\nexport const REQUEST_CEP = 'REQUEST_CEP';\nexport const RECEIVE_CEP = 'RECEIVE_CEP';\n\n// action creators\nfunction requestCEP(cep) {\n  return {\n    type: REQUEST_CEP,\n    cep\n  };\n}\n\nfunction receiveCEP(info) {\n  return {\n    type: RECEIVE_CEP,\n    payload: info\n  };\n}\n\n// async action creators\nfunction fetchCEP(cep) {\n  return async dispatch => {\n    dispatch(requestCEP(cep));\n\n    API.getLocationInfo(cep).then(info => {\n      return dispatch(receiveCEP(info));\n    });\n  };\n}\n\nexport default fetchCEP;\n","import { REQUEST_CEP, RECEIVE_CEP } from '../actions/cep';\n\nconst cep = (\n  state = {\n    isFetching: false,\n    address: {}\n  },\n  action\n) => {\n  switch (action.type) {\n    case REQUEST_CEP:\n      return {\n        ...state,\n        isFetching: true\n      };\n    case RECEIVE_CEP:\n      return {\n        ...state,\n        isFetching: false,\n        address: action.payload\n      };\n    default:\n      return state;\n  }\n};\n\nexport default cep;\n","import { combineReducers } from 'redux';\n\nimport cep from './cep';\n\nexport default combineReducers({\n  info: cep\n});\n","const logger = store => next => action => {\n  console.group(action.type);\n  console.log('%cThe action: ', 'color: #1197E3', action);\n  const result = next(action);\n  console.log('%cThe new state: ', 'color: #bada55', store.getState());\n  console.groupEnd();\n\n  return result;\n};\n\nexport default logger;\n","import thunk from 'redux-thunk';\nimport { applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport logger from './logger';\n\nexport default composeWithDevTools(applyMiddleware(thunk, logger));\n","import React, { Component } from 'react';\n\nclass Search extends Component {\n  state = {\n    cep: ''\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    const numbers = value.replace(/[^0-9]/g, '');\n    this.setState(() => ({ [name]: numbers }));\n  };\n\n  submitForm = e => {\n    e.preventDefault();\n    this.props.onSearch(this.state.cep);\n    this.setState(() => ({ cep: '' }));\n  };\n\n  render() {\n    return (\n      <div className=\"search\">\n        <h2 className=\"search__title\">Consultar</h2>\n        <form onSubmit={this.submitForm}>\n          <label className=\"search__label\">CEP</label>\n          <input\n            type=\"text\"\n            placeholder=\"02050-010\"\n            name=\"cep\"\n            aria-label=\"search\"\n            className=\"search__text\"\n            value={this.state.cep}\n            onChange={this.handleChange}\n          />\n          <button type=\"submit\" className=\"search__button\">\n            Buscar\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Search;\n","import React from 'react';\n\nconst Dialog = ({ visible, onCloseClick, children }) => (\n  <section className={visible ? 'dialog dialog--active' : 'dialog'}>\n    <div className=\"close-thik\" onClick={onCloseClick} />\n    {children}\n  </section>\n);\n\nexport default Dialog;\n","import React from 'react';\n\nconst Address = ({ logradouro = 'address', bairro, localidade, uf, cep }) => (\n  <section className=\"address\">\n    <h1 className=\"address__title\">{logradouro}</h1>\n    <div className=\"address__item\">{bairro}</div>\n    <p className=\"address__item\">{`${localidade}-${uf}`}</p>\n    <div className=\"address__item\">{cep}</div>\n  </section>\n);\n\nexport default Address;\n","import React, { Component } from 'react';\nimport { Map, GoogleApiWrapper, Marker, InfoWindow } from 'google-maps-react';\nimport { API_KEY } from '../../utils/api';\n\nconst mapStyles = {\n  width: '100%',\n  height: '100%'\n};\n\nclass MapContainer extends Component {\n  state = {\n    showingInfoWindow: false,\n    activeMarker: {},\n    selectedPlace: {},\n    initialCenter: {\n      lat: -12.765219,\n      lng: -52.079634\n    },\n    initialZoom: 4\n  };\n\n  onMarkerClick = (props, marker, e) =>\n    this.setState({\n      selectedPlace: props,\n      activeMarker: marker,\n      showingInfoWindow: true\n    });\n\n  onClose = () => {\n    if (this.state.showingInfoWindow) {\n      this.setState({\n        showingInfoWindow: false,\n        activeMarker: null\n      });\n    }\n  };\n\n  render() {\n    const { initialZoom, initialCenter } = this.state;\n    const { showMarker, google, lat, lng, logradouro } = this.props;\n\n    return (\n      <div className=\"map\">\n        <Map\n          google={google}\n          zoom={showMarker ? 15 : initialZoom}\n          style={mapStyles}\n          initialCenter={showMarker ? { lat, lng } : initialCenter}\n        >\n          {showMarker && (\n            <Marker onClick={this.onMarkerClick} name={logradouro} />\n          )}\n          <InfoWindow\n            marker={this.state.activeMarker}\n            visible={this.state.showingInfoWindow}\n            onClose={this.onClose}\n          >\n            <div>\n              <h4>{this.state.selectedPlace.name}</h4>\n            </div>\n          </InfoWindow>\n        </Map>\n      </div>\n    );\n  }\n}\n\nexport default GoogleApiWrapper({\n  apiKey: API_KEY\n})(MapContainer);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport fetchCEP from '../actions/cep';\n\nimport Search from './Search';\nimport Dialog from './Dialog';\nimport Address from './Address';\nimport Map from './Map';\nclass App extends Component {\n  state = {\n    showDialog: true\n  };\n\n  onCloseClick = () => {\n    this.setState(() => ({ showDialog: false }));\n  };\n\n  onSearch = cep => {\n    this.props.fetchCEP(cep);\n    this.setState(() => ({ showDialog: true }));\n  };\n\n  render() {\n    const {\n      info: { isFetching, address }\n    } = this.props;\n\n    return (\n      <div>\n        <h1 className=\"homepage__title\">Consulta de Endere√ßo</h1>\n        <Search onSearch={this.onSearch} />\n\n        {isFetching && <h1 className=\"loading\">Loading...</h1>}\n\n        {!isFetching && address.cep && (\n          <Dialog\n            visible={this.state.showDialog}\n            onCloseClick={this.onCloseClick}\n          >\n            <Address {...address} />\n            <Map showMarker {...address} />\n          </Dialog>\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  ...state\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchCEP: cep => dispatch(fetchCEP(cep))\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport configureStore from './store';\nimport './styles/main.scss';\n\nimport App from './components/App';\n\nReactDOM.render(\n  <Provider store={configureStore()}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n","import { createStore } from 'redux';\nimport reducer from './reducers';\nimport middleware from './middleware';\n\nexport default function configureStore(initialState = {}) {\n  return createStore(reducer, initialState, middleware);\n}\n"],"sourceRoot":""}